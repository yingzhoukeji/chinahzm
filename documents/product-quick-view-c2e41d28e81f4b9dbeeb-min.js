webpackJsonp([23],{0:function(l,m,a){a(2336);a(2395);a(1417);a(827);a(707);a(417);a(416);a(191);a(237);a(1483);a(223);a(1421);a(725)},191:function(l,m){YUI.add("squarespace-spinner",function(a){a.namespace("Squarespace").Spinner=a.Base.create("Spinner",a.Widget,[],{renderUI:function(){this.get("boundingBox").addClass(this.get("color"));0<a.UA.ie&&10>a.UA.ie&&(this.get("contentBox").append(a.Node.create('<img class="sqs-ie-spinner" src="crappy-ie-spinner.gif"/>')),
this.get("boundingBox").addClass("degraded"));var g=this.get("size");a.Lang.isNumber(g)||this.get("boundingBox").addClass(g)},spin:function(){this.get("boundingBox").show()},stop:function(){this.get("boundingBox").hide()},addClass:function(a){this.get("boundingBox").addClass(a)}},{CSS_PREFIX:"sqs-spin",NS:"spinner",ATTRS:{size:{value:"default",setter:function(g){a.Lang.isNumber(g)&&(this.set("width",g),this.set("height",g));return g}},color:{value:"light"}}})},"1.0",{requires:["base-build","widget"]})},
223:function(l,m){YUI.add("model",function(a,g){function b(){b.superclass.constructor.apply(this,arguments)}var c=YUI.namespace("Env.Model"),d=a.Lang,e=a.Array,h=a.Object,f="error";a.Model=a.extend(b,a.Base,{idAttribute:"id",_allowAdHocAttrs:!0,_isYUIModel:!0,initializer:function(b){this.changed={};this.lastChange={};this.lists=[]},destroy:function(d,c){var a=this;"function"===typeof d&&(c=d,d=null);a.onceAfter("destroy",function(){function b(f){f||e.each(a.lists.concat(),function(b){b.remove(a,d)});
c&&c.apply(null,arguments)}d&&(d.remove||d["delete"])?a.sync("delete",d,b):b()});return b.superclass.destroy.call(a)},generateClientId:function(){c.lastId||(c.lastId=0);return this.constructor.NAME+"_"+(c.lastId+=1)},getAsHTML:function(b){b=this.get(b);return a.Escape.html(d.isValue(b)?String(b):"")},getAsURL:function(b){b=this.get(b);return encodeURIComponent(d.isValue(b)?String(b):"")},isModified:function(){return this.isNew()||!h.isEmpty(this.changed)},isNew:function(){return!d.isValue(this.get("id"))},
load:function(b,d){var c=this;"function"===typeof b&&(d=b,b={});b||(b={});c.sync("read",b,function(a,e){var h={options:b,response:e},g;a?(h.error=a,h.src="load",c.fire(f,h)):(c._loadEvent||(c._loadEvent=c.publish("load",{preventable:!1})),g=h.parsed=c._parse(e),c.setAttrs(g,b),c.changed={},c.fire("load",h));d&&d.apply(null,arguments)});return c},parse:function(b){if("string"===typeof b)try{return a.JSON.parse(b)}catch(c){return this.fire(f,{error:c,response:b,src:"parse"}),null}return b},save:function(b,
c){var d=this;"function"===typeof b&&(c=b,b={});b||(b={});d._validate(d.toJSON(),function(a){a?c&&c.call(null,a):d.sync(d.isNew()?"create":"update",b,function(a,e){var h={options:b,response:e},g;a?(h.error=a,h.src="save",d.fire(f,h)):(d._saveEvent||(d._saveEvent=d.publish("save",{preventable:!1})),e&&(g=h.parsed=d._parse(e),d.setAttrs(g,b)),d.changed={},d.fire("save",h));c&&c.apply(null,arguments)})});return d},set:function(b,d,c){var a={};a[b]=d;return this.setAttrs(a,c)},setAttrs:function(b,d){var c=
this.idAttribute,f,e,g,t;d=a.merge(d);t=d._transaction={};"id"!==c&&(b=a.merge(b),h.owns(b,c)?b.id=b[c]:h.owns(b,"id")&&(b[c]=b.id));for(e in b)h.owns(b,e)&&this._setAttr(e,b[e],d);if(!h.isEmpty(t)){c=this.changed;g=this.lastChange={};for(e in t)h.owns(t,e)&&(f=t[e],c[e]=f.newVal,g[e]={newVal:f.newVal,prevVal:f.prevVal,src:f.src||null});d.silent||(this._changeEvent||(this._changeEvent=this.publish("change",{preventable:!1})),d.changed=g,this.fire("change",d))}return this},sync:function(){var b=e(arguments,
0,!0).pop();"function"===typeof b&&b()},toJSON:function(){var b=this.getAttrs();delete b.clientId;delete b.destroyed;delete b.initialized;"id"!==this.idAttribute&&delete b.id;return b},undo:function(b,d){var c=this.lastChange,a=this.idAttribute,f={},g;b||(b=h.keys(c));e.each(b,function(b){h.owns(c,b)&&(b=b===a?"id":b,g=!0,f[b]=c[b].prevVal)});return g?this.setAttrs(f,d):this},validate:function(b,d){d&&d()},addAttr:function(c,a,f){var e=this.idAttribute,h;e&&c===e&&(e=this._isLazyAttr("id")||this._getAttrCfg("id"),
h=a.value===a.defaultValue?null:a.value,d.isValue(h)||(h=e.value===e.defaultValue?null:e.value,d.isValue(h)||(h=d.isValue(a.defaultValue)?a.defaultValue:e.defaultValue)),a.value=h,e.value!==h&&(e.value=h,this._isLazyAttr("id")?this._state.add("id","lazy",e):this._state.add("id","value",h)));return b.superclass.addAttr.apply(this,arguments)},_parse:function(b){return this.parse(b)},_validate:function(b,c){function a(h){d.isValue(h)?(e.fire(f,{attributes:b,error:h,src:"validate"}),c(h)):c()}var e=this;
1===e.validate.length?a(e.validate(b,a)):e.validate(b,a)},_setAttrVal:function(d,c,a,e,f,h){var g=b.superclass._setAttrVal.apply(this,arguments),l=f&&f._transaction,C=h&&h.initializing;g&&(l&&!C)&&(l[d]={newVal:this.get(d),prevVal:a,src:f.src||null});return g}},{NAME:"model",ATTRS:{clientId:{valueFn:"generateClientId",readOnly:!0},id:{value:null}}})},"3.17.2",{requires:["base-build","escape","json-parse"]})},237:function(l,m){YUI.add("squarespace-widgets-alert",function(a){a.namespace("Squarespace.Widgets");
var g=a.Squarespace.Widgets.Alert=a.Base.create("alert",a.Squarespace.Widgets.Confirmation,[],{},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:a.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:a.Squarespace.Widgets.Confirmation.ANCHOR,show:function(b){return new g(b)},ATTRS:{className:{value:"alert"},style:{value:a.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:"Okay"}}})},"1.0",{requires:["base","squarespace-widgets-confirmation"]})},416:function(l,m){YUI.add("squarespace-rendering",
function(a){a.Squarespace.Rendering={getWidthForHeight:function(a,b,c){return a/b*c},getHeightForWidth:function(a,b,c){return b/a*c},getDimensionsFromNode:function(g){if(g=g.getAttribute("data-image-dimensions")){if(a.Lang.isString(g))return g=g.split("x"),{width:parseInt(g[0],10),height:parseInt(g[1],10)}}else return{width:null,height:null}},getSquarespaceSizeForWidth:function(g){a.config.win.devicePixelRatio&&(g*=a.config.win.devicePixelRatio);return 1500<g?"2500w":1E3<g?"1500w":750<g?"1000w":500<
g?"750w":300<g?"500w":100<g?"300w":"100w"},splitScriptsAndHTML:function(a){for(var b=a.indexOf("<script>"),c=-1,d="",e="",h=0;;){c=a.indexOf("\x3c/script>",h);if(-1==c||-1==b)return{html:a,script:""};var f=a.substring(b+8,c),e=e+f,d=d+a.substring(h,b),h=c+9,b=a.indexOf("<script>",h);if(-1===b)return 0===e.length&&(e=null),d+=a.substring(h),{html:d,script:e}}},getPixelSize:function(a){a=a.split("x");return parseInt(a[0],10)*parseInt(a[1],10)},scaleEmbed:function(a,b){var c=/height="([0-9]+)"/.exec(a);
if(!c)return a;var c=parseInt(c[1],10),d=/width="([0-9]+)"/.exec(a);if(!d)return a;d=parseInt(d[1],10);return a.replace(/height="([0-9]+)"/,'height="'+c*(b/d)+'"').replace(/width="([0-9]+)"/,'width="'+b+'"')},applyStyleToMap:function(a,b){var c=new google.maps.StyledMapType(b,{name:"Custom"});a.mapTypes.set("custom",c);a.setMapTypeId("custom")},createGrayscaleMap:function(a){this.applyStyleToMap(a,[{featureType:"landscape.man_made",elementType:"all",stylers:[{lightness:51}]},{featureType:"poi",elementType:"all",
stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"all",stylers:[{gamma:2.51}]},{featureType:"road.arterial",elementType:"all",stylers:[{gamma:1.9}]},{featureType:"water",elementType:"all",stylers:[{gamma:1.36}]},{featureType:"road.highway",elementType:"all",stylers:[{gamma:1.33}]},{featureType:"transit.station.rail",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"transit.station.bus",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"transit",
elementType:"all",stylers:[{gamma:1.2},{hue:"#0033ff"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{gamma:1.43}]},{featureType:"water",elementType:"all",stylers:[{lightness:-47}]},{featureType:"all",elementType:"all",stylers:[{saturation:-100}]},{featureType:"road.arterial",elementType:"labels",stylers:[{lightness:23}]}])},getIconUrl:function(a,b,c){return"/universal/images-v6/icons/icon-"+a+"-"+b+"-"+c+".png"},onMapConfigure:function(g){if(g=a.one(g)){var b=g.getAncestorData("layout-engine");
g=g.getAncestorData("manager");b&&g&&b.lm.configureBlock(null,g.boundingEl)}},renderMap:function(g,b,c,d){b=a.merge({location:{mapLat:40.720882,mapLng:-74.000988,mapZoom:12},vSize:12},b);if(g){c=c||{};var e=g._node;if(e.__map)google.maps.event.trigger(e.__map,"resize");else{g.addClass("page-map");g.set("innerHTML","&nbsp;");var h=a.bind(function(){e.__geocoder=new google.maps.Geocoder;e.__map=new google.maps.Map(e,{zoom:b.location.mapZoom,center:new google.maps.LatLng(b.location.mapLat,b.location.mapLng),
mapTypeId:google.maps.MapTypeId.ROADMAP,draggable:!0,scrollwheel:!0,disableDefaultUI:!0});a.Lang.isUndefined(d)?a.Squarespace.Rendering.createGrayscaleMap(e.__map):this.applyStyleToMap(e.__map,d);var f=b.location,h;f.addressLine1||f.addressLine2?(h=f.addressLine1+" "+f.addressLine2,f.addressCountry&&(h+=", "+f.addressCountry)):h=b.location.mapLat+","+b.location.mapLng;if(b.location.markerLat&&b.location.markerLng){var g=new google.maps.LatLng(b.location.markerLat,b.location.markerLng);e.__marker=
new google.maps.Marker({map:e.__map,animation:google.maps.Animation.DROP,draggable:!1,position:g,title:f.addressTitle?f.addressTitle+" "+h:h,icon:{url:"/universal/images-v6/icons/icon-map-marker-2x.png",size:new google.maps.Size(52,68),scaledSize:new google.maps.Size(26,34),anchor:new google.maps.Point(13,34)}});a.Lang.isObject(c.infoWindow)&&(e.__infoWindow=new google.maps.InfoWindow(a.merge({pixelOffset:new google.maps.Size(-13,10)},c.infoWindow)),c.infoWindow.autoOpen&&e.__infoWindow.open(e.__map,
e.__marker));google.maps.event.addListener(e.__marker,"click",a.bind(function(b,d){if(e.__infoWindow)e.__infoWindow.open(e.__map,e.__marker);else{b=b.toUrlValue();var c=d.getZoom(),c=a.QueryString.stringify({sll:b,q:h,z:c});window.open("http://maps.google.com/maps?"+c)}},this,g,e.__map))}e.startEditing=function(){e.__map.setOptions({draggable:!0,scrollwheel:!0,disableDefaultUI:!1});e.__marker&&e.__marker.setOptions({draggable:!0})};e.stopEditing=function(){e.__map.setOptions({draggable:!1,scrollwheel:!1,
disableDefaultUI:!0});e.__marker&&e.__marker.setOptions({draggable:!1})};a.one(e).fire("maps-loaded");google.maps.event.addListener(e.__map,"rightclick",a.bind(this.onMapConfigure,this,e))},this);a.Squarespace.GoogleMap.loaded?h():(e.__loadingMap=!0,a.Squarespace.GoogleMap.on("load-success",function(){e.__loadingMap=!1;h()}),a.Squarespace.GoogleMap.load())}}else console.error("Page map node missing...")}}},"1.0",{requires:[]})},417:function(l,m){YUI.add("datatype-date-format",function(a,g){var b=
function(b,a,c){"undefined"===typeof c&&(c=10);for(a+="";parseInt(b,10)<c&&1<c;c/=10)b=a+b;return b.toString()},c={formats:{a:function(b,a){return a.a[b.getDay()]},A:function(b,a){return a.A[b.getDay()]},b:function(b,a){return a.b[b.getMonth()]},B:function(b,a){return a.B[b.getMonth()]},C:function(a){return b(parseInt(a.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return b(parseInt(c.formats.G(a)%100,10),0)},G:function(b){var a=b.getFullYear(),h=parseInt(c.formats.V(b),
10);b=parseInt(c.formats.W(b),10);b>h?a++:0===b&&52<=h&&a--;return a},H:["getHours","0"],I:function(a){a=a.getHours()%12;return b(0===a?12:a,0)},j:function(a){var c=new Date(""+a.getFullYear()+"/1/1 GMT");a=new Date(""+a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()+" GMT")-c;a=parseInt(a/6E4/60/24,10)+1;return b(a,0,100)},k:["getHours"," "],l:function(a){a=a.getHours()%12;return b(0===a?12:a," ")},m:function(a){return b(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(b,a){return a.p[12<=
b.getHours()?1:0]},P:function(b,a){return a.P[12<=b.getHours()?1:0]},s:function(b,a){return parseInt(b.getTime()/1E3,10)},S:["getSeconds","0"],u:function(b){b=b.getDay();return 0===b?7:b},U:function(a){var e=parseInt(c.formats.j(a),10);a=6-a.getDay();e=parseInt((e+a)/7,10);return b(e,0)},V:function(a){var e=parseInt(c.formats.W(a),10),h=(new Date(""+a.getFullYear()+"/1/1")).getDay(),e=e+(4<h||1>=h?0:1);53===e&&4>(new Date(""+a.getFullYear()+"/12/31")).getDay()?e=1:0===e&&(e=c.formats.V(new Date(""+
(a.getFullYear()-1)+"/12/31")));return b(e,0)},w:"getDay",W:function(a){var e=parseInt(c.formats.j(a),10);a=7-c.formats.u(a);e=parseInt((e+a)/7,10);return b(e,0,10)},y:function(a){return b(a.getFullYear()%100,0)},Y:"getFullYear",z:function(a){a=a.getTimezoneOffset();var c=b(parseInt(Math.abs(a/60),10),0),h=b(Math.abs(a%60),0);return(0<a?"-":"+")+c+h},Z:function(b){var a=b.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");4<a.length&&(a=c.formats.z(b));
return a},"%":function(b){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(d,e){e=e||{};if(!a.Lang.isDate(d))return a.Lang.isValue(d)?d:"";var h,f;h=e.format||"%Y-%m-%d";f=a.Intl.get("datatype-date-format");for(var g=function(b,a){var d=c.aggregates[a];return"locale"===d?f[a]:d},s=function(e,h){var g=c.formats[h];switch(a.Lang.type(g)){case "string":return d[g]();case "function":return g.call(d,
d,f);case "array":if("string"===a.Lang.type(g[0]))return b(d[g[0]](),g[1]);default:return h}};h.match(/%[cDFhnrRtTxX]/);)h=h.replace(/%([cDFhnrRtTxX])/g,g);h=h.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,s);g=s=void 0;return h}};a.mix(a.namespace("Date"),c);a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2",{lang:"ar ar-JO ca ca-ES da da-DK de de-AT de-DE el el-GR en en-AU en-CA en-GB en-IE en-IN en-JO en-MY en-NZ en-PH en-SG en-US es es-AR es-BO es-CL es-CO es-EC es-ES es-MX es-PE es-PY es-US es-UY es-VE fi fi-FI fr fr-BE fr-CA fr-FR hi hi-IN hu id id-ID it it-IT ja ja-JP ko ko-KR ms ms-MY nb nb-NO nl nl-BE nl-NL pl pl-PL pt pt-BR ro ro-RO ru ru-RU sv sv-SE th th-TH tr tr-TR vi vi-VN zh-Hans zh-Hans-CN zh-Hant zh-Hant-HK zh-Hant-TW".split(" ")})},
707:function(l,m){YUI.add("squarespace-json-template",function(a){function g(b){return b.replace(/([\{\}\(\)\[\]\|\^\$\-\+\?])/g,"\\$1")}function b(b,a){var c=l[b+a];void 0===c&&(c="("+g(b)+"\\S.*?"+g(a)+"\n?)",c=RegExp(c,"g"));return c}function c(b,a){var c=[{context:b,index:-1}];return{PushSection:function(b){if(void 0===b||null===b)return null;b="@"==b?c[c.length-1].context:c[c.length-1].context[b]||null;c.push({context:b,index:-1});return b},Pop:function(){c.pop()},next:function(){var b=c[c.length-
1];-1==b.index&&(b={context:null,index:0},c.push(b));var a=c[c.length-2].context;if(b.index==a.length)c.pop();else return b.context=a[b.index++],!0},_Undefined:function(b){return void 0===a?null:a},_LookUpStack:function(b){for(var a=c.length-1;;){var f=c[a];if("@index"==b){if(-1!=f.index)return f.index}else if(f=f.context,"object"===typeof f&&(f=f[b],void 0!==f))return f;a--;if(-1>=a)return this._Undefined(b)}},get:function(b){if("@"==b)return c[c.length-1].context;var a=b.split("."),f=this._LookUpStack(a[0]);
if(1<a.length)for(var d=1;d<a.length;d++){if(null===f)return"[JSONT: Can't resolve '"+b+"'.]";f=f[a[d]];if(void 0===f)return this._Undefined(a[d])}return f}}}function d(b,a,c){for(var f=0;f<b.length;f++){var d=b[f];if("string"==typeof d)c(d);else(0,d[0])(d[1],a,c)}}function e(b,a,c){var f;f=a.get(b.name);for(var d=0;d<b.formatters.length;d++){var e=b.formatters[d];f=(0,e[0])(f,a,e[1])}c(f)}function h(b,a,c){var f=a.PushSection(b.section_name),e=!1;f&&(e=!0);f&&0===f.length&&(e=!1);e?(d(b.Statements(),
a,c),a.Pop()):(a.Pop(),d(b.Statements("or"),a,c))}function f(b,a,c){for(var f=a.get("@"),e=0;e<b.clauses.length;e++){var h=b.clauses[e],g=h[1];if((0,h[0][0])(f,a,h[0][1])){d(g,a,c);break}}}function H(b,a,c){var f=a.PushSection(b.section_name);if(f&&0<f.length){var f=f.length-1,e=b.Statements();b=b.Statements("alternate");for(var h=0;void 0!==a.next();h++)d(e,a,c),h!=f&&d(b,a,c)}else d(b.Statements("or"),a,c);a.Pop()}function s(c,d){function g(b){if(b.startsWith(D)){var c=d.partials[b.substr(D.length)];
if(c)return[function(b,f,d){return a.JSONTemplate.evaluateJsonTemplate(c,b)},null];throw{name:"BadPartialInclude",message:b.substr(D)+" is not a valid partial. Remember, loops are not supported (a partial include cannot be included inside itself)."};}var f=l.lookup(b);if(!f[0])throw{name:"BadFormatter",message:b+" is not a valid formatter"};return f}function s(b){var a=I.lookup(b);if(!a[0])throw{name:"BadPredicate",message:b+" is not a valid predicate"};return a}var l=new t([B(a.JSONTemplate.DEFAULT_FORMATTERS),
m(a.JSONTemplate.DEFAULT_PREFIX_FORMATTERS)]),I=t([B(a.JSONTemplate.DEFAULT_PREDICATES),m(a.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES)]),r=d.format_char||"|";if(":"!=r&&"|"!=r)throw{name:"ConfigurationError",message:"Only format characters : and | are accepted"};var w=d.meta||"{}",x=w.length;if(1==x%2)throw{name:"ConfigurationError",message:w+" has an odd number of metacharacters"};for(var E=w.substring(0,x/2),w=w.substring(x/2,x),x=b(E,w),p=C({}),u=[p],F=E.length,n,k,A=0;;){n=x.exec(c);if(null===
n)break;else k=n[0];n.index>A&&(A=c.slice(A,n.index),p.Append(A));A=x.lastIndex;n=!1;"\n"==k.slice(-1)&&(k=k.slice(null,-1),n=!0);k=k.slice(F,-F);if("#"!=k.charAt(0)){if("."==k.charAt(0)){k=k.substring(1,k.length);var q={"meta-left":E,"meta-right":w,space:" ",tab:"\t",newline:"\n"}[k];if(void 0!==q){p.Append(q);continue}if(q=k.match(J)){k=q[3];q[1]?(n=H,k=K({section_name:k})):(n=h,k=C({section_name:k}));p.Append([n,k]);u.push(k);p=k;continue}var v;if(q=k.match(L)){n=(v=q[1])?s(v):null;p.NewOrClause(n);
continue}var q=!1,y=k.match(M);if(y){if(v=y[1],q=!0,-1==v.indexOf("?")){n=[function(b){return function(a,c){var f,d,e;if(-1!==b.indexOf(" || ")){f=b.split("||");for(e=0;e<f.length;e++)if(d=f[e].trim(),c.get(d))return!0;return!1}if(-1!==b.indexOf(" && ")){f=b.split(" && ");for(e=0;e<f.length;e++)if(d=f[e].trim(),!c.get(d))return!1;return!0}return c.get(b)}}(v),null];k=G();k.NewOrClause(n);p.Append([f,k]);u.push(k);p=k;continue}}else if("?"==k.charAt(k.length-1)||"?"==k.split(" ")[0].charAt(k.split(" ")[0].length-
1))v=k,q=!0;if(q){n=v?s(v):null;k=G();k.NewOrClause(n);p.Append([f,k]);u.push(k);p=k;continue}if("alternates with"==k){p.AlternatesWith();continue}if("end"==k){u.pop();if(0<u.length)p=u[u.length-1];else throw{name:"TemplateSyntaxError",message:"Got too many {end} statements"};continue}}y=k.split(r);if(1==y.length)q=[g("str")];else{q=[];for(k=1;k<y.length;k++)q.push(g(y[k]));k=y[0]}p.Append([e,{name:k,formatters:q}]);n&&p.Append("\n")}}p.Append(c.slice(A));if(1!==u.length)throw{name:"TemplateSyntaxError",
message:"Got too few {end} statements."};return p}a.namespace("JSONTemplate");var D="apply ",l={};a.JSONTemplate.DEFAULT_FORMATTERS=a.Squarespace.TEMPLATE_FORMATTERS;a.JSONTemplate.DEFAULT_PREFIX_FORMATTERS=[].concat(a.Squarespace.TEMPLATE_PREFIX_FORMATTERS,[{name:"pluralize",func:function(b,a,c){switch(c.length){case 0:a="";c="s";break;case 1:a="";c=c[0];break;case 2:a=c[0];c=c[1];break;default:throw{name:"EvaluationError",message:"pluralize got too many args"};}return 1==b?a:c}},{name:"encode-space",
func:function(b,a,c){return b.replace(/\s/g,"&nbsp;")}},{name:"truncate",func:function(b,a,c){a=c[0]||100;c=c[1]||"...";b&&b.length>a&&(b=b.substring(0,a),b=b.replace(/\w+$/,""),b+=c);return b}},{name:"date",func:function(b,c,f){var d=0,d=(new Date(b)).getTimezoneOffset();if(!a.Lang.isNumber(b))return"Invalid date.";if("undefined"!==typeof TimezoneJS){var e;try{e=new TimezoneJS.Date(b,c.get("website.timeZone"))}catch(h){return"Invalid Timezone"}d=(isNaN(e.getTimezoneOffset())?0:e.getTimezoneOffset())-
d}else c=-parseInt(c.get("website.timeZoneOffset"),10)/6E4,e=(new Date).getTimezoneOffset(),d=c-e;b=new Date(b-6E4*d);f=f.join(" ");return a.DataType.Date.format(b,{format:f})}},{name:"image",func:function(b,c,f){var d;b.mediaFocalPoint&&(d=b.mediaFocalPoint.x+","+b.mediaFocalPoint.y);return'<img class="'+(f[0]?f[0]:"thumb-image")+'" '+(b.title?'alt="'+a.Squarespace.Escaping.escapeForHtmlTag(b.title)+'" ':"")+' data-image="'+b.assetUrl+'" data-image-dimensions="'+b.originalSize+'" data-image-focal-point="'+
d+'"/>'}},{name:"timesince",func:function(b,c,f){if(!a.Lang.isNumber(b))return"Invalid date.";f.join(" ");return'<span class="timesince" data-date="'+b+'">'+a.Squarespace.DateUtils.humanizeDate(b)+"</span>"}},{name:"resizedHeightForWidth",func:function(b,a,c){a=b.split("x");if(2!=a.length)return"Invalid source parameter.  Pass in 'originalSize'.";b=parseInt(a[0],10);a=parseInt(a[1],10);c=parseInt(c[0],10)/b;return parseInt(a*c,10)}},{name:"resizedWidthForHeight",func:function(b,a,c){a=b.split("x");
if(2!=a.length)return"Invalid source parameter.  Pass in 'originalSize'.";b=parseInt(a[0],10);a=parseInt(a[1],10);c=parseInt(c[0],10)/a;return parseInt(b*c,10)}},{name:"squarespaceThumbnailForWidth",func:function(b,c,f){return a.Squarespace.Rendering.getSquarespaceSizeForWidth(parseInt(f[0],10))}},{name:"squarespaceThumbnailForHeight",func:function(b,c,f){c=b.split("x");if(2!=c.length)return"Invalid source parameter.  Pass in 'originalSize'.";b=parseInt(c[0],10);c=parseInt(c[1],10);f=parseInt(f[0],
10)/c;f=parseInt(b*f,10);return a.Squarespace.Rendering.getSquarespaceSizeForWidth(f)}},{name:"cycle",func:function(b,a,c){return c[(b-1)%c.length]}}]);var B=function(b){return{lookup:function(a){return[b[a]||null,null]}}},m=function(b){return{lookup:function(a){for(var c=0;c<b.length;c++){var f=b[c].name,d=b[c].func;if(a.slice(0,f.length)==f)return c=a.charAt(f.length),a=""===c?[]:a.split(c).slice(1),[d,a]}return[null,null]}}},t=function(b){return{lookup:function(a){for(var c=0;c<b.length;c++){var f=
b[c].lookup(a);if(f[0])return f}return[null,null]}}},r=function(b){var a={current_clause:[],Append:function(b){a.current_clause.push(b)},AlternatesWith:function(){throw{name:"TemplateSyntaxError",message:"{.alternates with} can only appear with in {.repeated section ...}"};},NewOrClause:function(b){throw{name:"NotImplemented"};}};return a},C=function(b){var a=r(b);a.statements={"default":a.current_clause};a.section_name=b.section_name;a.Statements=function(b){return a.statements[b||"default"]||[]};
a.NewOrClause=function(b){if(b)throw{name:"TemplateSyntaxError",message:"{.or} clause only takes a predicate inside predicate blocks"};a.current_clause=[];a.statements.or=a.current_clause};return a},K=function(b){var a=C(b);a.AlternatesWith=function(){a.current_clause=[];a.statements.alternate=a.current_clause};return a},G=function(b){var a=r(b);a.clauses=[];a.NewOrClause=function(b){b=b||[function(b){return!0},null];a.current_clause=[];a.clauses.push([b,a.current_clause])};return a},J=/(repeated)?\s*(section)\s+(\S+)?/,
L=/^or(?:[\s\-]+(.+))?/,M=/^if(?:[\s\-]+(.+))?/;a.JSONTemplate.Template=Class.create({initialize:function(b,a,c){b=this.removeMultilineComments(b);this._options=a||{};this._program=s(b,this._options)},removeMultilineComments:function(b){for(var a=b.search("{##"),c;0<=a;)c=b.substr(a),b=b.substr(0,a)+c.substr(c.search("##}")+3),a=b.search("{##");return b},render:function(b,a){var f=c(b,this._options.undefined_str);d(this._program.Statements(),f,a)},expand:function(b){var a=[];this.render(b,function(b){a.push(b)});
return a.join("")}});a.JSONTemplate.DEFAULT_PREDICATES=a.Squarespace.TEMPLATE_PREDICATES;a.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES=a.Squarespace.TEMPLATE_PARAMETRIC_PREDICATES;a.JSONTemplate.evaluateJsonTemplate=function(b,c,f){return"string"!=typeof b?"JSON Template Error: Processing failed because no input was provided. (type: "+typeof b+", template: "+JSON.stringify(b)+", dictionary: "+JSON.stringify(c)+", partials: "+JSON.stringify(f)+")":(new a.JSONTemplate.Template(b,{partials:f})).expand(c)}},
"1.0",{requires:"datatype-date-format json squarespace-common squarespace-date-utils squarespace-rendering squarespace-template-helpers squarespace-util".split(" ")})},725:function(l,m,a){var g=a(76);YUI.add("squarespace-product-utils",function(b){b.Squarespace.ProductUtils={getProductAveragePrice:function(a){a=a.get("structuredContent");if(a.get("productType")===g.DIGITAL)return a.get("priceCents");a=a.get("variants");return b.Array.reduce(a,0,function(b,a){return b+(a.onSale?a.salePrice:a.price)})/
a.length},getProductEffectiveStock:function(a){a=a.get("structuredContent");if(a.get("productType")===g.DIGITAL)return Number.MAX_VALUE;a=a.get("variants");var d=0;b.Array.some(a,function(b){if(b.unlimited)return d=Number.MAX_VALUE,!0;d+=b.qtyInStock});return d},initializeVariantDropdowns:function(){b.all(".product-variants[data-variants]").each(function(a){var d=JSON.parse(a.getAttribute("data-variants")),e=a.all("select"),h=a.siblings(".product-price").item(0),f;h&&(f=h.getHTML());b.Squarespace.ProductUtils._checkVariantStockAndPrice(a,
d,e,h,f);e.detach("change");e.each(function(g){g.after("change",function(g){b.Squarespace.ProductUtils._checkVariantStockAndPrice(a,d,e,h,f)},this)},this)},this)},_checkVariantStockAndPrice:function(a,d,e,h,f){a.removeAttribute("data-unselected-options");a.removeAttribute("data-selected-variant");a.removeAttribute("data-variant-in-stock");var g=a.one(".variant-out-of-stock");g&&g.remove();var s=[],g=null,l=!1,m={};e.each(function(b){var a=b.get("value"),c=b.getAttribute("data-variant-option-name");
0===b.get("selectedIndex")?s.push(c):m[c]=a},this);if(0===s.length){for(e=0;e<d.length;e++){f=d[e];var B=!0,z;for(z in m)if(m[z]!=f.attributes[z]){B=!1;break}if(B){g=f;if(f.unlimited||0<f.qtyInStock)l=!0;break}}!g&&h?h.set("text","Unavailable"):h&&(h.empty(),g.onSale?(h.setHTML(b.Squarespace.Commerce.moneyString(g.salePrice)),h.append(b.Node.create('<span> </span><span class="original-price">'+b.Squarespace.Commerce.moneyString(g.price)+"</span>"))):h.setHTML(b.Squarespace.Commerce.moneyString(g.price)));
g&&!l&&a.append(b.Node.create('<div class="variant-out-of-stock">Out of stock.</div>'))}else h&&h.getHTML()!==f&&h.empty().setHTML(f);a.setAttribute("data-unselected-options",JSON.stringify(s));g&&a.setAttribute("data-selected-variant",JSON.stringify(g));l&&a.setAttribute("data-variant-in-stock",l)}}},"1.0",{requires:["base","node","squarespace-commerce-utils"]})},827:function(l,m){YUI.add("squarespace-async-form",function(a){a.namespace("Squarespace.Widgets");var g=a.Squarespace.Widgets.AsyncForm=
a.Base.create("AsyncForm",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._typeGetterMap={date:this._getMultiFieldVal,name:this._getMultiFieldVal,time:this._getMultiFieldVal,address:this._getMultiFieldVal,checkbox:this._getOptionFieldVal,likert:this._getLikertFieldVal,radio:this._getRadioFieldVal,select:this._getSelectVal,phone:this._getPhoneFieldVal};this._typeSetterMap={date:this._setMultiFieldVal,name:this._setMultiFieldVal,time:this._setMultiFieldVal,address:this._setMultiFieldVal,
checkbox:this._setOptionFieldVal,likert:this._setLikertFieldVal,radio:this._setRadioFieldVal,select:this._setSelectVal,phone:this._setPhoneFieldVal};this._defaultGetter=this._getSingleFieldVal;this._defaultSetter=this._setSingleFieldVal},renderUI:function(){g.superclass.renderUI.call(this);var b=this.get("form"),c=b.fields;a.Lang.isString(c[0])&&(c=a.Array.map(c,a.JSON.parse));var c={showTitle:this.get("showTitle"),preventSubmit:this.get("preventDefaultSubmit")||this.get("preventAllSubmits"),hideSubmitButton:this.get("hideSubmitButton"),
formId:b.id,formName:this.get("formName"),formFields:c,formSubmitButtonText:this.get("formSubmitButtonText"),formSubmissionMessage:b.parsedSubmissionMessage,formSubmissionHTML:b.submissionHTML},b=this.get("contentBox"),d=this.get("formTemplate").html,c=a.JSONTemplate.evaluateJsonTemplate(d,c);b.append(c);this._formEl=b.one("form");this._setFormData()},bindUI:function(){this._formEl.on("submit",function(b){if(this.get("preventDefaultSubmit")&&!this.get("preventAllSubmits")){this._clearErrors();var c=
this._validateForm(),d=c.errors;0<d.length?this._renderErrors(d):this.fetchValidatedFormSubmission(this.get("form").id,a.bind(function(){this.fire("submission",{data:c.data})},this),a.bind(function(b){var c=[];a.Object.each(b.errors,function(b,a){c.push({fieldId:a,message:b})});this._renderErrors(c)},this))}b.halt()},this);this.after("formDataChange",this._setFormData,this)},setStateSaving:function(){var b=this.get("contentBox");b.addClass("saving");b.one('input[type="submit"]').set("value","Saving...")},
setStateEditing:function(){var b=this.get("contentBox"),a=this.get("formSubmitButtonText");b.one('input[type="submit"]').set("value",a);b.removeClass("saving")},getLocalValidationErrors:function(){return this._validateForm().errors},fetchValidatedFormSubmission:function(b,c,d){a.Data.post({url:"/api/rest/forms/validate/"+b,headers:{"Content-Type":"application/json"},data:JSON.stringify(this.getFormData()),success:c,failure:d})},getFormData:function(){return this._validateForm().data},_renderErrors:function(b){a.Array.each(b,
function(b){this.get("contentBox").one("#"+b.fieldId).one(".title").insert('<div class="field-error">'+b.message+"</div>","before")},this)},_clearErrors:function(){this.get("contentBox").all(".field-error").remove(!0)},_validateForm:function(){var b={},a=[];this._formEl.all(".form-item").each(function(d){var e=d.getAttribute("id");if(d=this._getFieldData(d)){var h=d.error;h&&a.push({fieldId:e,message:h});b[e]=d.data}},this);return{data:b,errors:a}},_getFieldData:function(b){var c=b.get("className").split(" "),
d=null,e,h=!1;a.Array.each(c,function(b){a.Object.hasKey(this._typeGetterMap,b)?(d=b,e=this._typeGetterMap[d]):"section"===b&&(h=!0)},this);if(!h)return null===d&&(e=this._defaultGetter),e.call(this,b)},_getSingleFieldVal:function(b){var c=b.one(".field-element");if(c){var d=c.get("value"),e,d=!a.Lang.isValue(d)||""===d;b.hasClass("required")&&d&&(e="Required");return{data:c.get("value"),error:e}}return null},_getMultiFieldVal:function(b){var c=[],d,e=!1;b.all(".field-element").each(function(b){var f=
b.get("value");a.Lang.isValue(f)&&""!==f&&(e=!0);c.push(b.get("value"))});b.hasClass("required")&&!e&&(d="Required");return{data:c,error:d}},_getOptionFieldVal:function(b){var a=[],d;b.all("input").each(function(b){b.get("checked")&&a.push(b.get("value"))},this);b.hasClass("required")&&0===a.length&&(d="Required");return{data:a,error:d}},_getLikertFieldVal:function(b){var c={};b.all(".item").each(function(b){var e;b.all("input").each(function(b){b.get("checked")&&(e=b.get("value"))});a.Lang.isValue(e)&&
(c[b.getAttribute("data-question")]=e)});return{data:c,error:void 0}},_getRadioFieldVal:function(b){var c,d;b.all("input").each(function(b){b.get("checked")&&(c=b.get("value"))},this);b.hasClass("required")&&!a.Lang.isValue(c)&&(d="Required");return{data:c,error:d}},_getSelectVal:function(b){var c=b.one("select").get("value"),d,e=!a.Lang.isValue(c)||""===c;b.hasClass("required")&&e&&(d="Required");return{data:c,error:d}},_getPhoneFieldVal:function(b){b=this._getMultiFieldVal(b);var a=b.data;a&&3===
a.length&&a.unshift("");return b},_setFormData:function(){var b=this.get("formData");null!==b&&this._formEl.all(".form-item").each(function(c){var d=b[c.getAttribute("id")];if(d){var e=d.value,d=a.Lang.isValue(e)?e:d.values||[];this._setFieldData(c,d)}},this)},_setFieldData:function(b,c){var d=b.get("className").split(" "),e=null,h,f;a.Array.each(d,function(d){a.Object.hasKey(this._typeSetterMap,d)?(e=d,h=this._typeSetterMap[e]):"section"===d&&(f=!0);if(!f)return null===e&&(h=this._defaultSetter),
h.call(this,b,c)},this)},_setSingleFieldVal:function(b,a){var d=b.one(".field-element");if(d)return d.set("value",a)},_setMultiFieldVal:function(b,a){b.all(".field-element").each(function(b){b.set("value",a[b.getData("title")])})},_setOptionFieldVal:function(b,a){b.all("input").each(function(b){-1!==a.indexOf(b.get("value"))&&b.setAttribute("checked","checked")},this)},_setLikertFieldVal:function(b,c){b.all(".item").each(function(b){var e=b.getAttribute("data-question"),e=c[e];a.Lang.isValue(e)&&
""!==e&&(e=parseInt(e,10)+2,b.all("input").item(e).setAttribute("checked","checked"))})},_setRadioFieldVal:function(b,a){b.all("input").each(function(b){b.get("value")===a&&b.setAttribute("checked","checked")},this)},_setSelectVal:function(b,a){b.one("select").set("value",a)},_setPhoneFieldVal:function(b,a){3===b.all(".field").size()&&4===a.length&&a.shift();this._setMultiFieldVal(b,a)}},{CSS_PREFIX:"sqs-async-form",ATTRS:{form:{value:{fields:[]},validator:a.Lang.isValue},formTemplate:{value:null},
hideSubmitButton:{value:!1},formSubmitButtonText:{value:"Add to Cart"},formName:{value:"My Form Name"},formData:{value:null},showTitle:{value:!0},preventDefaultSubmit:{value:!0},preventAllSubmits:{value:!1}}})},"1.0",{requires:["base","node","json","squarespace-ss-widget","squarespace-json-template"]})},1417:function(l,m,a){var g=a(245);YUI.add("squarespace-cart-utils",function(b){var a,d,e;b.namespace("Squarespace.CartUtils");b.Squarespace.CartUtils={initializeAddToCartButtons:function(){var d=b.Squarespace.Commerce.isExpressCheckout(),
f=!1;b.all(".sqs-add-to-cart-button").each(function(a){var c=a.one(".sqs-add-to-cart-button-inner");c.plug(b.Squarespace.Animations.Scalable,{duration:0.2});d&&"Add To Cart"===a.getData("original-label")&&(c.setContent("Purchase"),a.setData("original-label","Purchase"));a.hasClass("use-form")&&(f=!0)},this);f&&!e&&b.Squarespace.CartUtils._getAdditionalFieldsFormTemplateSchema(function(b){e=b},this);a||(a=b.one("body").delegate("click",b.Squarespace.CartUtils._addCartEntry,".sqs-add-to-cart-button",
this))},_addCartEntry:function(a){var c=a.currentTarget;if(!c.get("parentNode").hasClass("cart-added")){var d=function(a){new b.Squarespace.Widgets.Alert({"strings.title":"Unable to "+(b.Squarespace.Commerce.isExpressCheckout()?"Purchase":"Add")+" Item","strings.message":a})};a=function(b){var a="Please select the ",c=b.length;if(1==c)a+=b[0]+" option.";else if(2==c)a+=b[0]+" and "+b[1]+" options.";else for(var f=0;f<c;f++)a=f==c-1?a+("and "+b[f]+" options."):a+(b[f]+", ");return a};var e=c.getAttribute("data-item-id"),
g,l,m=b.one(c.get("parentNode").siblings(".product-variants").item(0));if(b.Lang.isValue(m)){var z=JSON.parse(m.getAttribute("data-unselected-options")),t=z.length,r=m.getAttribute("data-selected-variant"),m=m.getAttribute("data-variant-in-stock"),r=r?JSON.parse(r):null,m=m?!0:!1;if(0<t){d(a(z));return}if(r)if(m)g=r;else{d("Sorry, we do not have enough of that item available.");return}else{d("Sorry, that item variant is unavailable. Please select another variant.");return}}if(a=c.get("parentNode").siblings(".product-quantity-input").item(0))if(l=
b.one(a).one("input").get("value"),!b.Lang.isNumber(Number(l))){d("Quantity must be a number.");return}c.hasClass("use-form")?this._verifyItemInStock({itemId:e,variant:g,inStockCb:b.bind(function(){b.Squarespace.CartUtils._openAdditionalFieldsForm(c,function(a){b.Squarespace.CartUtils._goToCheckoutOrAddToCart(c,e,g,l,a,d)},this)},this),outOfStockCb:function(){d("Sorry, we do not have enough of that item available.")}}):b.Squarespace.CartUtils._goToCheckoutOrAddToCart(c,e,g,l,null,d)}},_verifyItemInStock:function(a){var c=
b.Squarespace.Singletons.ShoppingCart;b.Data.get({url:b.Squarespace.API_ROOT+"commerce/inventory/stock/",data:{itemId:a.itemId},success:function(d){b.Array.some(d.results,function(b){return b.unlimited?!0:b.qtyInStock>c.totalForItem(a.itemId,a.variant)})?a.inStockCb():a.outOfStockCb()}})},_goToCheckoutOrAddToCart:function(a,c,d,e,g,l){b.Squarespace.CartUtils._setButtonStateAdding(a);if(b.Lang.isValue(e)&&0!==e%1)l("Quantity must be a whole number"),b.Squarespace.CartUtils._setButtonStateIdle(a);else{var m=
b.Squarespace.Commerce.isExpressCheckout();b.Squarespace.Singletons.ShoppingCart.addEntry(c,d,e,g,m,function(c){a.one(".sqs-add-to-cart-button-inner");c?(l(c),b.later(1E3,this,function(){b.Squarespace.CartUtils._setButtonStateIdle(a)})):b.Squarespace.Commerce.isExpressCheckout()?b.Squarespace.Commerce.goToCheckoutPage():b.later(1E3,this,function(){b.Lang.isNull(a._node)||(b.Squarespace.CartUtils._setButtonStateAdded(a),b.later(2E3,this,function(){b.Squarespace.CartUtils._setButtonStateIdle(a)}))})},
this)}},_setButtonStateAdding:function(a){var c=a.one(".sqs-add-to-cart-button-inner");c.once("hidden",function(){c.empty();a.addClass("cart-adding");(new b.Squarespace.Spinner({size:20,color:"light",render:c})).spin();c.append('<div class="status-text">Adding...</div>');c.show()},this);c.hide()},_setButtonStateAdded:function(b){var a=b.one(".sqs-add-to-cart-button-inner");a.empty();b.addClass("cart-added");a.append('<div class="status-text">Added!</div>')},_setButtonStateIdle:function(b){var a=b.one(".sqs-add-to-cart-button-inner");
a.once("hidden",function(){a.empty();b.removeClass("cart-adding");b.removeClass("cart-added");a.setContent(b.getData("original-label"));a.show()},this);a.hide()},_openAdditionalFieldsForm:function(a,c,g){d||(d=new b.Squarespace.Widgets.ModalLightbox({render:b.one("body")}));var l=b.JSON.parse(a.getData("form")),m=new b.Squarespace.Widgets.AsyncForm({form:l,formTemplate:e,formSubmitButtonText:a.getData("original-label"),formName:l.name,showTitle:!0});m.on("submission",function(a){c&&c.call(g||this,
a.data);d.close()},this);d.set("content",m);d.once("close",function(){m.destroy()},this);d.open()},_getAdditionalFieldsFormTemplateSchema:function(a,c){b.Data.get({url:"/api/template/GetTemplateSchema",data:{componentType:"widget",type:g.FORM},success:function(b){a.call(c||this,b)}},this)}}},"1.0",{requires:"base node json squarespace-commerce-utils squarespace-modal-lightbox squarespace-async-form squarespace-animations squarespace-spinner squarespace-widgets-alert".split(" ")})},1421:function(l,
m,a){var g=a(76),b=a(131);YUI.add("squarespace-commerce-analytics",function(a){var d=new a.Base.create("commerceTrack",a.Base,[],{itemViewed:function(a){this.fire("commerce-item-viewed",a)},itemAdded:function(a){this.fire("commerce-item-added",a)},itemRemoved:function(a){this.fire("commerce-item-removed",a)},itemModified:function(a){this.fire("commerce-item-modified",a)},checkoutStarted:function(a){this.fire("commerce-checkout-started",a)},checkoutConfirmed:function(a){this.fire("commerce-checkout-confirmed",
a)},contributionConfirmed:function(a){this.fire("commerce-contribution-confirmed",a)}},{ATTRS:{}});a.namespace("Squarespace");a.Squarespace.CommerceAnalytics=new d;var e=a.Base.create("commerceAnalytics",a.Base,[],{initializer:function(){this._events=[a.Squarespace.CommerceAnalytics.on("commerce-item-viewed",this._getProtectedTracker("onItemViewed"),this),a.Squarespace.CommerceAnalytics.on("commerce-item-added",this._getProtectedTracker("onItemAdded"),this),a.Squarespace.CommerceAnalytics.on("commerce-item-removed",
this._getProtectedTracker("onItemRemoved"),this),a.Squarespace.CommerceAnalytics.on("commerce-item-modified",this._getProtectedTracker("onItemModified"),this),a.Squarespace.CommerceAnalytics.on("commerce-checkout-started",this._getProtectedTracker("onCheckoutStarted"),this),a.Squarespace.CommerceAnalytics.on("commerce-checkout-confirmed",this._getProtectedTracker("onCheckoutConfirmed"),this),a.Squarespace.CommerceAnalytics.on("commerce-contribution-confirmed",this._getProtectedTracker("onContributionConfirmed"),
this)];this._setCartMode()},destructor:function(){a.Array.invoke(this._events,"detach")},_setCartMode:function(){var a=!0;try{a=Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.testModeOn}catch(b){}this.cartMode=a?"test":"live"},_getProtectedTracker:function(a){return function(b){try{this[a].call(this,b)}catch(c){}}},onItemViewed:function(a){},onItemAdded:function(a){},onItemRemoved:function(a){},onItemModified:function(a){},onCheckoutStarted:function(a){},onCheckoutConfirmed:function(a){},
onContributionConfirmed:function(a){}},{ATTRS:{}}),d=a.Base.create("commerceAnalyticsInternal",e,[],{_createCartData:function(a){return{CartOrderId:a.id,CartSubtotal:a.subtotalCents/100,CartTax:a.taxCents/100,CartCurrency:"USD",CartMode:this.cartMode}},_createProductData:function(a){var b=a.productType;return{ProductId:a.itemId,ProductName:a.title,ProductType:b===g.PHYSICAL?"PHYSICAL":b===g.DIGITAL?"DIGITAL":"SERVICE",ProductSKU:a.chosenVariant?a.chosenVariant.sku:"",ProductPrice:a.purchasePriceCents/
100,ProductQuantity:a.quantity}},_getItemVariantPrice:function(b){return a.Object.hasKey(b,"onSale")&&b.onSale?(a.Object.hasKey(b,"salePrice")?b.salePrice:b.salePriceCents)/100:(a.Object.hasKey(b,"price")?b.price:b.priceCents)/100},_getItemPrice:function(b){var d=0;a.Object.hasKey(b,"variants")&&0<b.variants.length?(a.Array.each(b.variants,function(a){d+=this._getItemVariantPrice(a)},this),d/=b.variants.length):d=this._getItemVariantPrice(b);return d},_createItemData:function(a){return{ProductId:a.id,
ProductName:a.title}},_createItemAddedData:function(b){return a.merge(this._createCartData(b.shoppingCart),this._createProductData(b.newlyAdded))},_createItemRemovedData:function(b){return a.merge(this._createCartData(b.shoppingCart),this._createProductData(b.updatedEntry))},_createItemModifiedData:function(b){return a.merge(this._createCartData(b.shoppingCart),this._createProductData(b.updatedEntry))},_createItemCheckoutStartedData:function(b,d){return a.merge(this._createCartData(b),this._createProductData(d))},
_createItemCheckoutCompletedData:function(b,d){return a.merge(this._createCartData(b),this._createProductData(d))},_track:function(b,d){a.Squarespace.Analytics.trackInternal(b,d)},onItemViewed:function(a){}},{ATTRS:{}}),h=a.Base.create("commerceAnalyticsMixpanel",d,[],{_track:function(b,d){a.Squarespace.Analytics.track(b,d)},onItemViewed:function(a){this._track("shopper_product_viewed",this._createItemData(a))},onItemAdded:function(a){this._track("shopper_product_added",this._createItemAddedData(a))},
onItemRemoved:function(a){this._track("shopper_product_removed",this._createItemRemovedData(a))},onItemModified:function(a){this._track("shopper_product_modified",this._createItemModifiedData(a))},onCheckoutStarted:function(b){a.each(b.entries,function(a){this._track("shopper_product_checkout_started",this._createItemCheckoutStartedData(b,a))},this)},onCheckoutConfirmed:function(b){a.each(b.purchasedCart.entries,function(a){this._track("shopper_product_purchased",this._createItemCheckoutCompletedData(b.purchasedCart,
a))},this);this._track("shopper_order_submitted",{CartOrderId:b.purchasedCart.id,CartCurrency:"USD",CartGrandTotal:b.purchasedCart.grandTotalCents/100,CartSubtotal:b.purchasedCart.subtotalCents/100,CartTax:b.purchasedCart.taxCents/100,CartShipping:b.purchasedCart.shippingCostCents/100,CartTotalQuantity:b.purchasedCart.totalQuantity,CartMode:this.cartMode})},onContributionConfirmed:function(a){this._track("donation_submitted",{Currency:"USD",Total:a.amountCents/100,CartMode:this.cartMode})}},{ATTRS:{}}),
e=a.Base.create("commerceAnalyticsGoogle",e,[],{onCheckoutConfirmed:function(b){_gaq&&(_gaq.push(["_addTrans",b.id,"",b.purchasedCart.subtotalCents/100,b.purchasedCart.taxCents/100,b.purchasedCart.shippingCostCents/100,b.customer.billingAddress.city,b.customer.billingAddress.state,b.customer.billingAddress.country]),a.each(b.purchasedCart.entries,function(a){_gaq.push(["_addItem",b.id,a.chosenVariant?a.chosenVariant.sku:"digital",a.title,"",a.purchasePriceCents/100,a.quantity])}),_gaq.push(["_trackTrans"]))}},
{ATTRS:{}});new d;new h;new e;a.Lang.isObject(Static)&&a.Object.hasKey(Static,"SQUARESPACE_CONTEXT")&&a.Object.hasKey(Static.SQUARESPACE_CONTEXT,"item")&&Static.SQUARESPACE_CONTEXT.item.recordType===b.STORE_ITEM&&a.Squarespace.CommerceAnalytics.itemViewed(Static.SQUARESPACE_CONTEXT.item)},"1.0",{requires:["array-invoke","event-custom","node","base","squarespace-util"]})},1483:function(l,m){YUI.add("squarespace-models-shopping-cart",function(a){a.namespace("Squarespace.Models");a.namespace("Squarespace.Singletons");
var g=a.Squarespace.Models.ShoppingCart=a.Base.create("shoppingCart",a.Model,[],{initializer:function(){this.publish("item-added",{emitFacade:!0});this.publish("loaded",{emitFacade:!0});this.publish("recalculate-start",{emitFacade:!0});this.publish("recalculate-end",{emitFacade:!0});this._isRecalculating=this._readInProgress=!1;this.on("recalculate-start",function(){this._isRecalculating=!0},this);this.on("recalculate-end",function(){this._isRecalculating=!1},this)},toJSON:function(){var b=g.superclass.toJSON.call(this),
c=b.created;a.Lang.isNull(c)||(b.created=c.getTime());return b},sync:function(a,c,d){switch(a){case "read":this._read(c,d)}},load:function(b,c,d){"function"===typeof b&&(c=b,b={});this._readinProgress?this.after("load",c,d):a.Model.prototype.load.call(this,b,c?a.bind(c,d||this):null)},isRecalculating:function(){return this._isRecalculating},hasEntry:function(b,c){return a.Array.reduce(this.get("entries"),!1,function(d,e){return a.Lang.isValue(c)?d||e.itemId==b&&c.sku==e.chosenVariant.sku:d||e.itemId==
b})},addEntry:function(b,c,d,e,g,f,l){a.Data.post({url:"/api/commerce/shopping-cart/entries"+(g?"?isExpress=true":""),headers:{"Content-Type":"application/json"},data:a.JSON.stringify({itemId:b,sku:a.Lang.isValue(c)?c.sku:null,quantity:d,additionalFields:a.JSON.stringify(e)}),success:function(b){a.Squarespace.CommerceAnalytics.itemAdded(b);this.setAttrs(b.shoppingCart);this.fire("item-added");a.Lang.isFunction(f)&&f.call(l||this,null,b.newlyAdded)},failure:function(b){b.crumbFail&&(a.Squarespace.Utils.areCookiesEnabled()?
b.error="Your session has expired. Please reload the page and try again.":b.error="Please enable cookies in your browser, reload the page, and try again.");a.Lang.isFunction(f)&&f.call(l||this,b.message,null)}},this)},updateFormSubmission:function(b,c,d,e){var g=b.chosenVariant;this.fire("recalculate-start");a.Data.put({headers:{"Content-Type":"application/json"},url:a.Lang.sub("/api/commerce/shopping-cart/entries/{entryId}/additionalFields",{entryId:b.id}),data:a.JSON.stringify({itemId:b.itemId,
sku:a.Lang.isValue(g)?g.sku:null,additionalFields:a.JSON.stringify(c)}),success:function(b){this.fire("recalculate-end");this.setAttrs(b.shoppingCart);a.Lang.isFunction(d)&&d.call(e||this,null,b.updatedEntry)},failure:function(b){this.fire("recalculate-end");a.Lang.isFunction(d)&&d.call(e||this,b.message,null)}},this)},updateQuantity:function(b,c,d,e){var g=b.chosenVariant;this.fire("recalculate-start");a.Data.put({headers:{"Content-Type":"application/json"},url:a.Lang.sub("/api/commerce/shopping-cart/entries/{entryId}",
{entryId:b.id}),data:a.JSON.stringify({itemId:b.itemId,sku:a.Lang.isValue(g)?g.sku:null,quantity:c}),success:function(b){this.fire("recalculate-end");0===c?a.Squarespace.CommerceAnalytics.itemRemoved(b):a.Squarespace.CommerceAnalytics.itemModified(b);this.setAttrs(b.shoppingCart);a.Lang.isFunction(d)&&d.call(e||this,null,b.updatedEntry)},failure:function(b){this.fire("recalculate-end");a.Lang.isFunction(d)&&d.call(e||this,b.message,null)}},this)},updateShippingLocation:function(b,c,d){this.fire("recalculate-start");
a.Data.put({url:"/api/commerce/shopping-cart/shipping-location",data:b,success:function(b){this.fire("recalculate-end");this.setAttrs(b);a.Lang.isFunction(c)&&c.call(d||this,null)},failure:function(b){this.fire("recalculate-end");a.Lang.isFunction(c)&&c.call(d||this,b.message,null)}},this)},updateShippingMethod:function(b,c,d){this.fire("recalculate-start");a.Data.put({url:"/api/commerce/shopping-cart/selected-shipping-option",data:{shippingOptionKey:b},success:function(b){this.fire("recalculate-end");
this.setAttrs(b);a.Lang.isFunction(c)&&c.call(d||this,null)},failure:function(b){this.fire("recalculate-end");a.Lang.isFunction(c)&&c.call(d||this,b.message,null)}},this)},addCoupon:function(b,c,d){a.Data.post({url:"/api/commerce/shopping-cart/coupons",data:{promoCode:b},success:function(b){this.setAttrs(b);a.Lang.isFunction(c)&&c.call(d||this,null)},failure:function(b){a.Lang.isFunction(c)&&c.call(d||this,b.message,null)}},this)},removeCoupon:function(b,c,d){a.Data.del({url:"/api/commerce/shopping-cart/coupons/"+
b,success:function(b){this.setAttrs(b);a.Lang.isFunction(c)&&c.call(d||this,null)},failure:function(b){a.Lang.isFunction(c)&&c.call(d||this,b.message,null)}},this)},updateCustomerInfo:function(b){a.Data.put({url:"/api/commerce/shopping-cart/customer",data:{email:b},success:this.setAttrs.bind(this),failure:function(a){console.warn("An error happened when adding the customer info: ",a)}},this)},totalForItem:function(b,c){var d=a.Lang.isValue(c);return a.Array.reduce(this.get("entries"),0,function(a,
g){return g.item.id===b&&(!d||d&&g.chosenVariant.sku===c.sku)?a+g.quantity:a})},hasShippingOptions:function(){var b=this.get("shippingOptions");return a.Lang.isArray(b)&&0<b.length},hasShippingCountry:function(){return a.Lang.isString(this.get("shippingLocation").country)},_read:function(b,c){this._readInProgress=!0;this.fire("loading");a.Data.get({url:"/api/commerce/shopping-cart",data:{mock:b.mock?"true":"false"},success:function(a){this.fire("loaded");this._readInProgress=!1;c(null,a)},failure:function(a){this.fire("loaded");
this._readInProgress=!1;c(a.message,null)}},this)}},{ATTRS:{id:{validator:a.Lang.isString},websiteId:{validator:a.Lang.isString},orderId:{validator:a.Lang.isString},created:{getter:function(b){return a.Lang.isValue(b)?new Date(b):null},setter:function(b){return a.Lang.isDate(b)?b.getTime():b},validator:a.Lang.isNumber},isPurchased:{value:!1,validator:a.Lang.isBoolean},entries:{value:[],validator:a.Lang.isArray},shippingOptions:{value:[],validator:a.Lang.isArray},selectedShippingOption:{validator:a.Lang.isObject},
shippingLocation:{validator:a.Lang.isObject},applicableTaxRules:{value:[],validator:a.Lang.isArray},coupons:{value:[],validator:a.Lang.isArray},validCoupons:{value:[],validator:a.Lang.isArray},invalidCoupons:{value:[],validator:a.Lang.isArray},subtotalCents:{validator:a.Lang.isNumber,value:0},taxCents:{validator:a.Lang.isNumber,value:0},shippingCostCents:{validator:a.Lang.isNumber,value:0},discountCents:{validator:a.Lang.isNumber,value:0},grandTotalCents:{validator:a.Lang.isNumber,value:0},totalQuantity:{validator:a.Lang.isNumber,
value:0},hasDigital:{validator:a.Lang.isBoolean,value:!1},purelyDigital:{validator:a.Lang.isBoolean,value:!1},requiresShipping:{validator:a.Lang.isBoolean,value:!1}}});a.Squarespace.Singletons.ShoppingCart=new g},"1.0",{requires:["base","model","squarespace-commerce-utils","squarespace-commerce-analytics","squarespace-util"]})},2336:function(l,m){YUI.add("squarespace-product-quick-view",function(a){a.config.win.Squarespace.onInitialize(a,function(){if(!a.UA.mobile){var g=null,b={},c=function(c,e){var h=
c.getData("id"),f=c.getData("group")||"ungrouped";b[f]||(b[f]=[],a.all(".sqs-product-quick-view-button[data-id]").each(function(a){(f==a.getData("group")||"ungrouped"==f&&!a.getData("group"))&&b[f].push(a.getData("id"))}));g?g.get("currentId")===h&&g.get("currentGroup")===f?(e&&e.halt(!0),g.open()):(g.set("currentId",h),g.set("currentGroup",f)):g=new a.Squarespace.Widgets.Products.QuickView({currentId:h,currentGroup:f,products:b,render:!0})};a.one("body").delegate("click",function(a){a.preventDefault();
c(a.currentTarget,a)},".sqs-product-quick-view-button[data-id]");a.Global.on("tweak:change",function(b){var e=b.getName();b=-1<e.indexOf("tweak-product-quick-view-lightbox-");var e=-1<e.indexOf("tweak-product-item-gallery-"),h=a.one(".collection-type-products.view-item");b||e&&!h?g?g.get("isLightboxOpen")||g.open():(b=a.one(".sqs-product-quick-view-button[data-id]"),c(b,null)):g&&g.get("lightbox").close()})}})},"1.0",{requires:["squarespace-widgets-products-quick-view"]})},2395:function(l,m){YUI.add("squarespace-widgets-products-quick-view",
function(a){a.namespace("Squarespace.Widgets.Products");var g=a.Squarespace.Widgets.Products.QuickView=a.Base.create("quickView",a.Squarespace.SSWidget,[],{initializer:function(){this.set("lightbox",new a.Squarespace.Widgets.ModalLightbox({content:this.get("boundingBox"),render:a.one("body"),className:g.CSS_LIGHTBOX_PREFIX}));this.get("boundingBox").append(this.get("nextButton")).append(this.get("prevButton"));this.get("lightbox").get("boundingBox").append(this.get("closeButton"))},bindUI:function(){g.superclass.bindUI.call(this);
this.after(["currentIdChange","currentGroupChange"],function(){this._destroyProductItemViewInstance();this.syncUI()});this._registerEvent(this.get("lightbox").on("close",function(){this.set("isLightboxOpen",!1)},this));this._bindUIControls();this._bindKeyboardControls();if(window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn())a.on("beforeunload",function(){this._destroyProductItemViewInstance();this.destroy(!0);this.get("lightbox").destroy(!0)},this)},syncUI:function(){g.superclass.syncUI.call(this);
this._getData();this.get("nextButton").toggleClass(g.CSS_HIDDEN,!this._getNextId());this.get("prevButton").toggleClass(g.CSS_HIDDEN,!this._getPrevId())},_bindUIControls:function(){var b=this.get("boundingBox");this._registerEvent(b.delegate("click",function(a){this._setId(this._getNextId());a.stopPropagation()},"."+g.CSS_NEXT_BUTTON,this));this._registerEvent(b.delegate("click",function(a){this._setId(this._getPrevId());a.stopPropagation()},"."+g.CSS_PREV_BUTTON,this));this._registerEvent(b.delegate("click",
function(a){this.get("lightbox").close();a.stopPropagation()},"."+g.CSS_CLOSE_BUTTON,this));this._registerEvent(a.one("body").on("click",function(a){this.get("isLightboxOpen")&&(!b.contains(a.target)&&!this._isProductForm(a.target))&&this.get("lightbox").close();a.stopPropagation()},this))},_bindKeyboardControls:function(){this._registerEvent(a.on("key",function(){this.get("isLightboxOpen")&&this._setId(this._getNextId())},a.config.win,"down:39",this));this._registerEvent(a.on("key",function(){this.get("isLightboxOpen")&&
this._setId(this._getPrevId())},a.config.win,"down:37",this))},_getData:function(){a.Data.get({url:"/api/rendering/product-quick-view/"+this.get("currentId"),success:function(a){this._renderModal(a.html)},failure:function(a){this._renderError(a)}},this)},_renderModal:function(b){this.get("contentBox").empty().insert(b);this.set("productsItemViewInstance",new a.Squarespace.SystemCollections.Products.ItemV2({host:this.get("contentBox")}));this.get("isLightboxOpen")?this.get("lightbox").syncUI():this.open();
this._executeScripts();this._initializeCheckoutArea()},open:function(){this.get("lightbox").open();this.set("isLightboxOpen",!0);a.one(".sqs-style-mode-active")&&a.Squarespace.EscManager.removeTarget(this.get("lightbox"))},_executeScripts:function(){var a=this.get("contentBox");a.all("script").each(function(c){var d=document.createElement("script");d.type="text/javascript";c.getAttribute("src")?d.src=c.getAttribute("src"):d.innerHTML=c.get("innerHTML");c.remove();a.append(d)},this)},_initializeCheckoutArea:function(){a.Squarespace.ProductUtils.initializeVariantDropdowns();
a.Squarespace.CartUtils.initializeAddToCartButtons();a.Lang.isNull(a.Cookie.get("CART"))?a.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible"):a.Squarespace.Singletons.ShoppingCart.load(function(){a.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},this)},_renderError:function(b){new a.Squarespace.Widgets.Alert({"strings.title":"Error"+(b&&b.title?": "+b.title:""),"strings.message":b&&b.error||"There was an issue loading the quick view of this product. Please see the product's page for full product details."})},
_getNextId:function(){var a=this.get("products")[this.get("currentGroup")],c=a.indexOf(this.get("currentId"))+1;return a[c]||!1},_getPrevId:function(){var a=this.get("products")[this.get("currentGroup")],c=a.indexOf(this.get("currentId"))-1;return a[c]||!1},_setId:function(a){a&&this.set("currentId",a)},_destroyProductItemViewInstance:function(){this.get("productsItemViewInstance")&&this.get("productsItemViewInstance").destroy(!0)},_isProductForm:function(b){var c=a.Squarespace.Widgets.AsyncForm.CSS_PREFIX;
return b.ancestor("."+c)||b.hasClass("lightbox-close")&&b.siblings("."+c)||b.one("."+c)||b.hasClass(c)}},{CSS_PREFIX:"sqs-product-quick-view",CSS_LIGHTBOX_PREFIX:"sqs-product-quick-view-lightbox",CSS_NEXT_BUTTON:"sqs-product-quick-view-lightbox-next-button",CSS_PREV_BUTTON:"sqs-product-quick-view-lightbox-prev-button",CSS_CLOSE_BUTTON:"sqs-product-quick-view-lightbox-close-button",CSS_HIDDEN:"sqs-product-quick-view-lightbox-element-hidden",ATTRS:{currentId:{value:null},currentGroup:{value:null},products:{value:{}},
lightbox:{value:null},prevButton:{valueFn:function(){return a.Node.create('<div class="'+g.CSS_PREV_BUTTON+'"><svg viewBox="0 0 23 48"><g class="svg-icon"><polyline fill="none" stroke-miterlimit="10" points="21.5,1.3 2.6,23.4 21.5,45.7 "/></g></svg></div>')}},nextButton:{valueFn:function(){return a.Node.create('<div class="'+g.CSS_NEXT_BUTTON+'"><svg viewBox="0 0 23 48"><g class="svg-icon"><polyline fill="none" stroke-miterlimit="10" points="1.5,45.7 20.4,23.5 1.5,1.3 "/></g></svg></div>')}},closeButton:{valueFn:function(){return a.Node.create('<div class="'+
g.CSS_CLOSE_BUTTON+'"><svg viewBox="0 0 16 16"><g class="svg-icon"><line fill="none" stroke-miterlimit="10" x1="1.4" y1="1.4" x2="14.4" y2="14.4"/><line fill="none" stroke-miterlimit="10" x1="1.4" y1="14.4" x2="14.4" y2="1.4"/></g></svg></div>')}},isLightboxOpen:{value:!1}}})},"1.0",{requires:"squarespace-beforeunload squarespace-cart-utils squarespace-image-loader squarespace-modal-lightbox squarespace-models-shopping-cart squarespace-product-utils squarespace-ss-widget squarespace-widgets-alert".split(" ")})}});
